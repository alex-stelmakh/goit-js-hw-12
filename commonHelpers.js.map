{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery-container');\n\nexport function inputPictures(hits) {\n  const hitsList = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<ul class=\"gallery-card\">\n      <li class=\"gallery\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\"> \n   <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"270\" height=\"160\"/>\n   </a>\n    <div class=\"discrabe\">\n  <ul class=\"discrabe-list\">\n  <li class=\"discrabe-item\"><b>Likes</b> ${likes}</li>\n  <li class=\"discrabe-item\"><b>Views</b> ${views}</li>\n  <li class=\"discrabe-item\"><b>Comments</b> ${comments}</li>\n  <li class=\"discrabe-item\"><b>Downloads</b> ${downloads}</li>\n  </ul>\n</div>\n</li>\n    </ul>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML(\"beforeend\", hitsList);\n\n  if (hits.length === 0) {\n    hideLoading();\n    return errorParams();\n  }\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n  }).refresh();\n  hideLoading();\n}\n\nexport function showLoading() {\n  const loading = document.querySelector('.loading');\n  loading.style.display = 'flex';\n}\n\nexport function hideLoading() {\n  const loading = document.querySelector('.loading');\n  loading.style.display = 'none';\n}\n\nexport function errorParams(err) {\n  iziToast.error({\n    position: 'topRight',\n    title: '',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nconst hiddenClass = 'is-hidden';\n\nexport function hideLoadMore(button) {\n  button.classList.add(hiddenClass);\n}\n\nexport function showLoadMore(button) {\n  button.classList.remove(hiddenClass);\n}\n\nexport function disableLoadMore(button) {\n  button.disabled = true;\n}\n\nexport function enableLoadMore(button) {\n  button.disabled = false;\n}","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nexport async function fetchParams({ q = '', page = 1, per_page = 15 }) {\n  const API_KEY = '44848974-7ecdee37a41921c1b33ea19fc';\n  const OPTIONS = new URLSearchParams({\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page,\n  });\n\n  return (await axios.get(`?${OPTIONS.toString()}`)).data;\n}","import {\n  inputPictures,\n  errorParams,\n  showLoading,\n  hideLoading,\n  hideLoadMore,\n  showLoadMore,\n  disableLoadMore,\n  enableLoadMore,\n} from './js/render-functions';\nimport { fetchParams } from './js/pixabay-api';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst formSearch = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery-container');\nconst loading = document.querySelector('.loading');\nconst btnLoad = document.querySelector('.btn-load');\n\nconst params = {\n  q: '',\n  page: 1,\n  per_page: 15,\n  maxPage: 0,\n};\nhideLoadMore(btnLoad);\n\nformSearch.addEventListener('submit', getPictureByValue);\n\nasync function getPictureByValue(evt) {\n  evt.preventDefault();\n  gallery.innerHTML = '';\n  params.page = 1;\n  const form = evt.currentTarget;\n\n  params.q = form.elements.insert.value.toLowerCase().trim();\n\n  if (!params.q) {\n    hideLoading();\n    return errorParams();\n    form.reset();\n  }\n\n  showLoading();\n  showLoadMore(btnLoad);\n  disableLoadMore(btnLoad);\n\n  try {\n    const { hits, totalHits } = await fetchParams(params);\n    inputPictures(hits);\n\n    params.maxPage = Math.ceil(totalHits / params.per_page);\n    if (hits.length > 0 && hits.length !== totalHits) {\n      enableLoadMore(btnLoad);\n      btnLoad.removeEventListener('click', handleBtnLoad);\n      btnLoad.addEventListener('click', handleBtnLoad);\n    } else {\n      hideLoadMore(btnLoad);\n    }\n\n    const itemsScroll = gallery.getBoundingClientRect().height * 2;\n    window.scrollBy({\n      top: itemsScroll,\n      behavior: 'smooth',\n    });\n  } catch (err) {\n    errorParams(err);\n  }\n  form.reset();\n}\n\nasync function handleBtnLoad() {\n  params.page += 1;\n  disableLoadMore(btnLoad);\n  showLoading();\n\n  try {\n    const { hits } = await fetchParams(params);\n    inputPictures(hits);\n  } catch (err) {\n    errorParams(err);\n  } finally {\n    hideLoading();\n    enableLoadMore(btnLoad);\n\n    if (params.page === params.maxPage) {\n      hideLoadMore(btnLoad);\n      btnLoad.removeEventListener('click', handleBtnLoad);\n      iziToast.info({\n        position: 'topRight',\n        title: '',\n        message:\n          'We are sorry, but you have reached the end of search results.',\n      });\n    }\n  }\n}\n\n"],"names":["gallery","inputPictures","hits","hitsList","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hideLoading","errorParams","SimpleLightbox","showLoading","loading","err","iziToast","hiddenClass","hideLoadMore","button","showLoadMore","disableLoadMore","enableLoadMore","axios","fetchParams","q","page","per_page","API_KEY","OPTIONS","formSearch","btnLoad","params","getPictureByValue","evt","form","totalHits","handleBtnLoad","itemsScroll"],"mappings":"owBAKA,MAAMA,EAAU,SAAS,cAAc,oBAAoB,EAEpD,SAASC,EAAcC,EAAM,CAClC,MAAMC,EAAWD,EACd,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,sCAE0BL,CAAa;AAAA,eACpCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,2CAIEC,CAAK;AAAA,2CACLC,CAAK;AAAA,8CACFC,CAAQ;AAAA,+CACPC,CAAS;AAAA;AAAA;AAAA;AAAA,UAKnD,EACA,KAAK,EAAE,EAIV,GAFAV,EAAQ,mBAAmB,YAAaG,CAAQ,EAE5CD,EAAK,SAAW,EAClB,OAAAS,IACOC,EAAW,EAEH,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,MACd,gBAAiB,QAClB,CAAA,EAAE,QAAU,EACbF,GACF,CAEO,SAASG,GAAc,CAC5B,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,MAAM,QAAU,MAC1B,CAEO,SAASJ,GAAc,CAC5B,MAAMI,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,MAAM,QAAU,MAC1B,CAEO,SAASH,EAAYI,EAAK,CAC/BC,EAAS,MAAM,CACb,SAAU,WACV,MAAO,GACP,QACE,0EACN,CAAG,CACH,CAEA,MAAMC,EAAc,YAEb,SAASC,EAAaC,EAAQ,CACnCA,EAAO,UAAU,IAAIF,CAAW,CAClC,CAEO,SAASG,EAAaD,EAAQ,CACnCA,EAAO,UAAU,OAAOF,CAAW,CACrC,CAEO,SAASI,EAAgBF,EAAQ,CACtCA,EAAO,SAAW,EACpB,CAEO,SAASG,EAAeH,EAAQ,CACrCA,EAAO,SAAW,EACpB,CCnFAI,EAAM,SAAS,QAAU,0BAElB,eAAeC,EAAY,CAAE,EAAAC,EAAI,GAAI,KAAAC,EAAO,EAAG,SAAAC,EAAW,IAAM,CACrE,MAAMC,EAAU,qCACVC,EAAU,IAAI,gBAAgB,CAClC,IAAKD,EACL,EAAAH,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAAC,CACJ,CAAG,EAED,OAAQ,MAAMJ,EAAM,IAAI,IAAIM,EAAQ,SAAU,CAAA,EAAE,GAAG,IACrD,CCFA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClD/B,EAAU,SAAS,cAAc,oBAAoB,EAC3C,SAAS,cAAc,UAAU,EACjD,MAAMgC,EAAU,SAAS,cAAc,WAAW,EAE5CC,EAAS,CACb,EAAG,GACH,KAAM,EACN,SAAU,GACV,QAAS,CACX,EACAd,EAAaa,CAAO,EAEpBD,EAAW,iBAAiB,SAAUG,CAAiB,EAEvD,eAAeA,EAAkBC,EAAK,CACpCA,EAAI,eAAc,EAClBnC,EAAQ,UAAY,GACpBiC,EAAO,KAAO,EACd,MAAMG,EAAOD,EAAI,cAIjB,GAFAF,EAAO,EAAIG,EAAK,SAAS,OAAO,MAAM,cAAc,OAEhD,CAACH,EAAO,EACV,OAAAtB,IACOC,EAAW,EAIpBE,IACAO,EAAaW,CAAO,EACpBV,EAAgBU,CAAO,EAEvB,GAAI,CACF,KAAM,CAAE,KAAA9B,EAAM,UAAAmC,CAAS,EAAK,MAAMZ,EAAYQ,CAAM,EACpDhC,EAAcC,CAAI,EAElB+B,EAAO,QAAU,KAAK,KAAKI,EAAYJ,EAAO,QAAQ,EAClD/B,EAAK,OAAS,GAAKA,EAAK,SAAWmC,GACrCd,EAAeS,CAAO,EACtBA,EAAQ,oBAAoB,QAASM,CAAa,EAClDN,EAAQ,iBAAiB,QAASM,CAAa,GAE/CnB,EAAaa,CAAO,EAGtB,MAAMO,EAAcvC,EAAQ,sBAAqB,EAAG,OAAS,EAC7D,OAAO,SAAS,CACd,IAAKuC,EACL,SAAU,QAChB,CAAK,CACF,MAAa,CACZ3B,EAAe,CAChB,CACDwB,EAAK,MAAK,CACZ,CAEA,eAAeE,GAAgB,CAC7BL,EAAO,MAAQ,EACfX,EAAgBU,CAAO,EACvBlB,IAEA,GAAI,CACF,KAAM,CAAE,KAAAZ,CAAM,EAAG,MAAMuB,EAAYQ,CAAM,EACzChC,EAAcC,CAAI,CACnB,MAAa,CACZU,EAAe,CACnB,QAAY,CACRD,IACAY,EAAeS,CAAO,EAElBC,EAAO,OAASA,EAAO,UACzBd,EAAaa,CAAO,EACpBA,EAAQ,oBAAoB,QAASM,CAAa,EAClDrB,EAAS,KAAK,CACZ,SAAU,WACV,MAAO,GACP,QACE,+DACV,CAAO,EAEJ,CACH"}